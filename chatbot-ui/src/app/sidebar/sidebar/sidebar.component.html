<!-- src/app/sidebar/sidebar/sidebar.component.html - Version corrigée -->

<nav class="sidebar">

  <div class="top-controls">
    <button class="top-btn new-conv" (click)="newConversation()">
      <mat-icon>add</mat-icon>
      <span *ngIf="isExpanded">Nouvelle conv.</span>
    </button>
    <button mat-stroked-button class="top-btn delete-all" (click)="deleteAllConversations()">
      <mat-icon>delete_sweep</mat-icon>
      <span *ngIf="isExpanded">Tout supprimer</span>
    </button>
  </div>

  <mat-divider></mat-divider>
  
  <h2 class="section-title" *ngIf="isExpanded">Chats</h2>

  <ul class="conv-list">
    <li *ngFor="let conv of conversations"
        class="conv-item"
        [class.active]="conv.id === currentConversationId"
        (click)="selectConversation(conv.id)">

      <mat-icon>{{ conv.id === currentConversationId ? 'forum' : 'chat_bubble' }}</mat-icon>

      <span *ngIf="isExpanded">{{ conv.title }}</span>

      <!-- Bouton menu (⋮) -->
      <button mat-icon-button
              class="menu-btn"
              *ngIf="isExpanded"
              [matMenuTriggerFor]="menuConv"
              (click)="$event.stopPropagation()">
        <mat-icon>more_vert</mat-icon>
      </button>

      <!-- Menu contextuel par conversation -->
      <mat-menu #menuConv="matMenu">
        <button mat-menu-item (click)="renameConversation(conv); $event.stopPropagation()">
          <mat-icon>edit</mat-icon>
          <span>Modifier</span>
        </button>
        <button mat-menu-item (click)="deleteConversation(conv.id); $event.stopPropagation()">
          <mat-icon>delete_outline</mat-icon>
          <span>Supprimer</span>
        </button>
      </mat-menu>
    </li>
  </ul>

  <!-- ✅ MODIFIÉ: Structure correcte restaurée -->
  <div class="bottom-group">
    
  </div>
</nav>
