<div class="auth-page">
  <div class="auth-layout">
    <!-- Hero -->
    <section class="hero">
      <div class="hero-inner">
        <h2 class="hero-kicker">Sécurité du compte</h2>
        <h3 class="hero-typing">
          <span class="static">Réinitialiser votre mot de passe</span>
        </h3>
        <p class="hero-sub">Saisissez votre adresse e-mail pour recevoir un lien sécurisé.</p>
      </div>
    </section>

    <!-- Carte -->
    <section class="auth-card">
      <div class="brand">
        <span class="material-icons">mark_email_unread</span>
      </div>
      <h1 class="title">Mot de passe oublié</h1>
      <p class="subtitle">Nous vous envoyons un lien valide 24h.</p>

      <ng-container *ngIf="!sent; else sentTpl">
        <form (ngSubmit)="submit()">
          <div class="form-field">
            <label>Email</label>
            <div class="input">
              <span class="material-icons">mail</span>
              <input type="email"
                     [(ngModel)]="email"
                     name="email"
                     placeholder="vous@exemple.com"
                     required />
            </div>
          </div>

          <button type="submit" class="btn primary" [disabled]="loading || !email">
            <span class="material-icons" *ngIf="!loading">send</span>
            <span *ngIf="loading" class="spinner"></span>
            <span>{{ loading ? 'Envoi…' : 'Envoyer le lien' }}</span>
          </button>
        </form>

        <p class="alt-action">
          <a routerLink="/login">Retour à la connexion</a>
        </p>

        <p *ngIf="error" class="error">{{ error }}</p>
      </ng-container>

      <ng-template #sentTpl>
        <div class="notice success">
          <span class="material-icons">check_circle</span>
          <div>
            <div class="notice-title">Lien envoyé</div>
            <div class="notice-sub">Vérifie ta boîte de réception et tes spams.</div>
          </div>
        </div>

        <button class="btn" [disabled]="countdown>0" (click)="resend()">
          <span class="material-icons">restart_alt</span>
          <span>
            {{ countdown>0 ? ('Renvoyer dans ' + countdown + 's') : 'Renvoyer' }}
          </span>
        </button>

        <p class="alt-action"><a routerLink="/login">Retour à la connexion</a></p>
      </ng-template>
    </section>
  </div>
</div>
